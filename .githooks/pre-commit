#!/usr/bin/env bash
set -euo pipefail

repo_root="$(git rev-parse --show-toplevel)"
cd "$repo_root"

if [[ -f "scripts/auto_changelog.py" ]]; then
  python3 scripts/auto_changelog.py
fi

if command -v uv &> /dev/null; then
  uv run ruff check .
  uv run ruff format .
  uv run mypy
else
  if command -v ruff &> /dev/null; then
    ruff check .
    ruff format .
  fi
  if command -v mypy &> /dev/null; then
    mypy
  fi
fi
